var ROSQUEUE=ROSQUEUE||{REVISION:"0.0.1-SNAPSHOT"};ROSQUEUE.Queue=function(a){a=a||{},this.ros=a.ros,this.sent_enabled=!1,this.studyTime=a.studyTime,this.userId=a.userId;this.updateQueueClient=new ROSLIB.Service({ros:this.ros,name:"/update_queue",serviceType:"rms_queue_manager/UpdateQueue"}),this.queueSub=new ROSLIB.Topic({ros:this.ros,name:"/rms_queue",messageType:"rms_queue_manager/RMSQueue"})},ROSQUEUE.Queue.prototype.enqueue=function(){var a=60*this.studyTime,b=new ROSLIB.ServiceRequest({user_id:this.userId,enqueue:!0,study_time:a}),c=this;this.updateQueueClient.callService(b,function(a){c.queueSub.subscribe(function(a){for(var b=a.queue.length,d={min:0,sec:0,active:!1};b--;)if(c.userId===a.queue[b].user_id)return d.min=Math.floor(a.queue[b].wait_time.secs/60),d.sec=a.queue[b].wait_time.secs%60,void(-1===d.min&&-1===d.sec?(c.emit("enabled"),c.sent_enabled||c.emit("first_enabled"),c.sent_enabled=!0):d.min>=0&&d.sec>=0&&(c.emit("wait_time",d),c.emit("disabled")));c.emit("disabled"),c.emit("dequeue")}),c.emit("enqueue")})},ROSQUEUE.Queue.prototype.dequeue=function(){var a=new ROSLIB.ServiceRequest({user_id:this.userId,enqueue:!1,study_time:0}),b=this;this.updateQueueClient.callService(a,function(a){b.emit("dequeue")})},ROSQUEUE.Queue.prototype.__proto__=EventEmitter2.prototype;