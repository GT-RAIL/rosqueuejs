var ROSQUEUE=ROSQUEUE||{REVISION:"0.0.1-SNAPSHOT"};ROSQUEUE.Queue=function(a){a=a||{},this.ros=a.ros,this.studyTime=a.studyTime,this.userId=a.userId;var b=this;this.updateQueueClient=new ROSLIB.Service({ros:this.ros,name:"/update_queue",serviceType:"rms_queue_manager/UpdateQueue"}),this.queueSub=new ROSLIB.Topic({ros:this.ros,name:"/rms_queue",messageType:"rms_queue_manager/RMSQueue"}),this.popFrontSub=new ROSLIB.Topic({ros:this.ros,name:"/rms_pop_front",messageType:"std_msgs/Int32"}),this.queueSub.subscribe(function(a){for(var c=a.queue.length,d={min:0,sec:0,active:!1};c--;)b.userId===a.queue[c].user_id&&(d.min=Math.floor(a.queue[c].wait_time.secs/60),d.sec=a.queue[c].wait_time.secs%60,0===d.min&&0===d.sec&&(d.active=!0),b.emit("queue_sub",d))}),this.popFrontSub.subscribe(function(a){console.log(a),b.userId===a.data&&(b.dequeue(),b.emit("pop_front_sub"))})},ROSQUEUE.Queue.prototype.enqueue=function(){var a=60*this.studyTime,b=new ROSLIB.ServiceRequest({user_id:this.userId,enqueue:!0,study_time:a}),c=this;console.log(b),this.updateQueueClient.callService(b,function(a){console.log("enqueue result..."),c.emit("enqueue")})},ROSQUEUE.Queue.prototype.dequeue=function(){var a=new ROSLIB.ServiceRequest({user_id:this.userId,enqueue:!1,study_time:0}),b=this;this.updateQueueClient.callService(a,function(a){b.emit("dequeue")})},ROSQUEUE.Queue.prototype.__proto__=EventEmitter2.prototype;