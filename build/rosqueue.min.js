var ROSQUEUE=ROSQUEUE||{REVISION:"0.0.2-SNAPSHOT"};ROSQUEUE.Queue=function(a){a=a||{},this.ros=a.ros,this.studyTime=a.studyTime,this.userId=a.userId,this.sentActivate=!1,this.updateQueueClient=new ROSLIB.Service({ros:this.ros,name:"/queue_manager/update_queue",serviceType:"queue_manager/UpdateQueue"}),this.queueSub=new ROSLIB.Topic({ros:this.ros,name:"/queue_manager/queue",messageType:"queue_manager/RMSQueue"})},ROSQUEUE.Queue.prototype.enqueue=function(){var a=new ROSLIB.ServiceRequest({user_id:this.userId,enqueue:!0,study_time:60*this.studyTime}),b=this;this.updateQueueClient.callService(a,function(a){b.queueSub.subscribe(function(a){for(var c={min:0,sec:0},d=a.queue.length-1;d>=0;d--)if(b.userId===a.queue[d].user_id)return void(0===d?(c.min=Math.floor(a.queue[d].time_left.secs/60),c.sec=a.queue[d].time_left.secs%60,b.sentActivate||(b.emit("activate"),b.sentActivate=!0),b.emit("enabled",c)):(c.min=Math.floor(a.queue[d].wait_time.secs/60),c.sec=a.queue[d].wait_time.secs%60,b.emit("wait_time",c),b.emit("disabled")));b.emit("disabled"),b.emit("dequeue")}),b.emit("enqueue")})},ROSQUEUE.Queue.prototype.dequeue=function(){var a=new ROSLIB.ServiceRequest({user_id:this.userId,enqueue:!1,study_time:0}),b=this;this.updateQueueClient.callService(a,function(a){b.emit("dequeue")})},ROSQUEUE.Queue.prototype.__proto__=EventEmitter2.prototype;